# XSL-Tester Configuration
# https://www.playframework.com/documentation/latest/Configuration

play.http.secret.key = "changeme-in-production-use-APPLICATION_SECRET-env-var"
play.http.secret.key = ${?APPLICATION_SECRET}

# Allowed hosts
play.filters.hosts {
  allowed = ["localhost", "127.0.0.1", "."]
}

# Database Configuration
db.default {
  driver = org.mariadb.jdbc.Driver
  url = "jdbc:mariadb://localhost:3306/fiddles"
  url = ${?DB_URL}
  username = "xsltester"
  username = ${?DB_USER}
  password = "xsltester"
  password = ${?DB_PASSWORD}

  # Connection pool
  hikaricp {
    minimumIdle = 2
    maximumPoolSize = 10
  }

  # JNDI binding for JPA
  jndiName = "DefaultDS"
}

# JPA Configuration
jpa.default = defaultPersistenceUnit

# Play evolutions - disabled since Hibernate manages schema
play.evolutions {
  db.default.enabled = false
}

# Parser settings for large XML/XSL content
play.http.parser.maxMemoryBuffer = 4MB
play.http.parser.maxDiskBuffer = 10MB

# Disable CSRF for API endpoints (or configure properly)
play.filters.disabled += play.filters.csrf.CSRFFilter

# Security headers - allow iframe embedding for PDF preview
play.filters.headers {
  frameOptions = "SAMEORIGIN"
  contentSecurityPolicy = "frame-ancestors 'self'"
}

# Logging
logger.root = ERROR
logger.play = INFO
logger.application = DEBUG
